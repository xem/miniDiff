<body>
<script>
/*diff = function(seq1, seq2){
  var N = seq1.length, M = seq2.length, MAX = N + M, furthestReaching = [], D, k, x, y, step, i, j, src = [], target = [], stepMap = [], dist = MAX;
  for(;dist--;)stepMap[dist]=[];
  furthestReaching[MAX + 1] = 0;
  for(D = 0; D <= MAX && dist === -1; D++){
    for(k = -D, x, y, step; k <= D && dist === -1; k+=2){
      if(k === -D || (k !== D && furthestReaching[k - 1 + MAX] < furthestReaching[k + 1 + MAX])) x = furthestReaching[k + 1 + MAX], step = 3;
      else x = furthestReaching[k - 1 + MAX] + 1, step = 2;
      y = x - k;
      stepMap[x][y] = step;
      while(x < N && y < M && seq1[x] === seq2[y]) x++, y++, stepMap[x][y] = 0;
      furthestReaching[k + MAX] = x;
      if(x >= N && y >= M) dist = D;
    }
  }
  for(i = N,j = M; i || j;){
    switch(stepMap[i][j]){
    case 0: src.unshift(seq1[i-1]); target.unshift(0); i -= 1; j -= 1; break;
    case 1: src.unshift(seq1[i-1]); target.unshift(seq2[j-1]); i -= 1; j -= 1; break;
    case 2: src.unshift(seq1[i-1]); target.unshift(-1); i -= 1; j -= 0; break;
    case 3: src.unshift(-1); target.unshift(seq2[j-1]); i -= 0; j -= 1; break;
    }
  }
  return { src, target }
};*/

diff=(t,s,e,a,i,r,f,n,h,p=t.length,u=s.length,c=p+u,o=[],d=[],M=[],S=[],D=c)=>{for(;D--;)S[D]=[];for(o[c+1]=0,e=0;e<=c&&-1===D;e++)for(a=-e;a<=e&&-1===D;a+=2){for(a===-e||a!==e&&o[a-1+c]<o[a+1+c]?(i=o[a+1+c],f=3):(i=o[a-1+c]+1,f=2),r=i-a,S[i][r]=f;i<p&&r<u&&t[i]===s[r];)i++,r++,S[i][r]=0;o[a+c]=i,i>=p&&r>=u&&(D=e)}for(n=p,h=u;n||h;)switch(S[n][h]){case 0:d.unshift(t[n-1]),M.unshift(0),n-=1,h-=1;break;case 1:d.unshift(t[n-1]),M.unshift(s[h-1]),n-=1,h-=1;break;case 2:d.unshift(t[n-1]),M.unshift(-1),n-=1,h-=0;break;case 3:d.unshift(-1),M.unshift(s[h-1]),n-=0,h-=1}return{src:d,target:M}}

// Test
console.log(diff([1, 2, 'a', 'b','e','g'], [1, 2, 'c', 'b','e','f',3]));
</script>