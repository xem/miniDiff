<body>
<script>
/*diff = function(seq1, seq2){
  var N = seq1.length, M = seq2.length, MAX = N + M, furthestReaching = [], D, k, x, y, step, src = [], target = [], stepMap = [], dist = MAX, a;
  for(;dist--;)stepMap[dist]=[];
  furthestReaching[MAX + 1] = 0;
  for(D = 0; D <= MAX && dist === -1; D++){
    for(k = -D, x, y, step; k <= D && dist === -1; k+=2){
      if(k === -D || (k !== D && furthestReaching[k - 1 + MAX] < furthestReaching[k + 1 + MAX])) x = furthestReaching[k + 1 + MAX], step = 3;
      else x = furthestReaching[k - 1 + MAX] + 1, step = 2;
      y = x - k;
      stepMap[x][y] = step;
      while(x < N && y < M && seq1[x] === seq2[y]) x++, y++, stepMap[x][y] = 0;
      furthestReaching[k + MAX] = x;
      if(x >= N && y >= M) dist = D;
    }
  }
  for(;N || M;){
    a = stepMap[N][M]; src.unshift(a > 2 ? -1 : seq1[N-1]); target.unshift([0, step = seq2[M-1],-1,step][a]); a < 3 && N--; a != 2 && M --;    
  }
  return { src, target }
};*/

diff=(f,r,t,n,o,e,h,g,s=f.length,a=r.length,c=s+a,l=[],d=[],v=[],b=[],j=c)=>{for(;j--;)b[j]=[];for(l[c+1]=0,t=0;t<=c&&-1===j;t++)for(n=-t;n<=t&&-1===j;n+=2){for(n===-t||n!==t&&l[n-1+c]<l[n+1+c]?(o=l[n+1+c],h=3):(o=l[n-1+c]+1,h=2),b[o][e=o-n]=h;o<s&&e<a&&f[o]===r[e];)b[++o][++e]=0;l[n+c]=o,o>=s&&e>=a&&(j=t)}for(;s||a;)d.unshift((g=b[s][a])>2?-1:f[s-1]),v.unshift([0,h=r[a-1],-1,h][g]),g<3&&s--,2!=g&&a--;return{d,v}}

// Test
console.log(diff([1, 2, 'a', 'b','e','g'], [1, 2, 'c', 'b','e','f',3]));
</script>